<style>
.lx-highlight { position: relative; border-radius:3px; padding:1px 2px;}
.lx-highlight .lx-tooltip {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  background: #333;
  color: #fff;
  text-align: left;
  border-radius: 4px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  max-width: 240px;
  white-space: normal;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.lx-highlight:hover .lx-tooltip { visibility: visible; opacity:1; }
.lx-animated-wrapper { max-width: 100%; font-family: Arial, sans-serif; }
.lx-controls {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 8px;
  padding: 12px; margin-bottom: 16px;
}
.lx-button-row {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;
}
.lx-control-btn {
  background: #4285f4; color: white; border: none; border-radius: 4px;
  padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
  transition: background-color 0.2s;
}
.lx-control-btn:hover { background: #3367d6; }
.lx-progress-container {
  margin-bottom: 8px;
}
.lx-progress-slider {
  width: 100%; margin: 0; appearance: none; height: 6px;
  background: #ddd; border-radius: 3px; outline: none;
}
.lx-progress-slider::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px; background: #4285f4;
  border-radius: 50%; cursor: pointer;
}
.lx-progress-slider::-moz-range-thumb {
  width: 18px; height: 18px; background: #4285f4; border-radius: 50%;
  cursor: pointer; border: none;
}
.lx-status-text {
  text-align: center; font-size: 12px; color: #666; margin-top: 4px;
}
.lx-text-window {
  font-family: monospace; white-space: pre-wrap; border: 1px solid #90caf9;
  padding: 12px; max-height: 260px; overflow-y: auto; margin-bottom: 12px;
  line-height: 1.6;
}
.lx-attributes-panel {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 6px;
  padding: 8px 10px; margin-top: 8px; font-size: 13px;
}
.lx-current-highlight {
  border-bottom: 4px solid #ff4444;
  font-weight: bold;
  animation: lx-pulse 1s ease-in-out;
}
@keyframes lx-pulse {
  0% { text-decoration-color: #ff4444; }
  50% { text-decoration-color: #ff0000; }
  100% { text-decoration-color: #ff4444; }
}
.lx-legend {
  font-size: 12px; margin-bottom: 8px;
  padding-bottom: 8px; border-bottom: 1px solid #e0e0e0;
}
.lx-label {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 4px;
  color: #000;
}
.lx-attr-key {
  font-weight: 600;
  color: #1565c0;
  letter-spacing: 0.3px;
}
.lx-attr-value {
  font-weight: 400;
  opacity: 0.85;
  letter-spacing: 0.2px;
}

/* Add optimizations with larger fonts and better readability for GIFs */
.lx-gif-optimized .lx-text-window { font-size: 16px; line-height: 1.8; }
.lx-gif-optimized .lx-attributes-panel { font-size: 15px; }
.lx-gif-optimized .lx-current-highlight { text-decoration-thickness: 4px; }
</style>
    <div class="lx-animated-wrapper lx-gif-optimized">
      <div class="lx-attributes-panel">
        <div class="lx-legend">Highlights Legend: <span class="lx-label" style="background-color:#D2E3FC;">action_item</span> <span class="lx-label" style="background-color:#C8E6C9;">concern</span> <span class="lx-label" style="background-color:#FEF0C3;">emotion</span></div>
        <div id="attributesContainer"></div>
      </div>
      <div class="lx-text-window" id="textWindow">
        AI: Namaskar Bhaiya, hum Sunita Devi bol at hain, Rajesh Verma ji ke taraf se. Kaise hain aap? Aapke yahan kaun si problem sabse badi ba? Rozgar, baadh, ya kuchh aur? Hum sunat hain.
AI: Haan ji, aapka
AI: Haan ji, aapka yeh chinta bilkul sahi ba. Kisan Bhaiya log ke samne yeh bahut bada problem ba. Verma ji aap jaisan Kisan Bhaiya ke liye bahut kaam karat hain. Unhone Makhana
AI: Hum ee bolat hain ki Verma ji ne aapke liye Makhana Board banwaya hai, aur kisan log ke liye ₹2000 crore ke projects laaye hain. Jisse aapke kheti mein fayda ho sake. Aapka jo loan problem hai, usko bhi woh dekhat hain. Aap bataiye, aapke khet mein kaun si fasal hoti hai?
AI: Achha theek ba. Bajra ke kisan log ke liye bhi Verma ji ne bahut kuchh kail ba. Unka jo vision hai, woh kisan log ke aamdani badhawe ke liye hai. Aap bataiye, agar Verma ji phir se jeet jatein hain, toh aapke mann mein ka ummeed ba?
USER: Yahan par sabse badi samasya toh yeh hai ki kheti karte hue <span class="lx-highlight lx-current-highlight" data-idx="0" style="background-color:#C8E6C9;">kisan ka karz maaf hi nahin ho pata</span>. <span class="lx-highlight" data-idx="1" style="background-color:#C8E6C9;">Byaj itna adhik hai ki hum chuka hi nahin pate</span>. <span class="lx-highlight" data-idx="2" style="background-color:#FEF0C3;">Boliye, kya bol rahe ho?</span> <span class="lx-highlight" data-idx="3" style="background-color:#C8E6C9;">Hamare khet mein hum bajra ugate hain</span>.
AI: Haan Bhaiya, aapka yeh baat bilkul sahi ba. <span class="lx-highlight" data-idx="4" style="background-color:#FEF0C3;">Hum samajh sakat hain</span>. Verma ji <span class="lx-highlight" data-idx="5" style="background-color:#D2E3FC;">kisanon ke liye interest rate kam karwane par zaroor</span>
AI: Haan, Verma ji <span class="lx-highlight" data-idx="6" style="background-color:#D2E3FC;">aapke loan par jo interest rate ba, usko kam karwane par bilkul dhyan de rahat hain</span>. Unka poora koshish ba ki <span class="lx-highlight" data-idx="7" style="background-color:#D2E3FC;">kisan log ke samasya kam ho sake</span> aur <span class="lx-highlight" data-idx="8" style="background-color:#D2E3FC;">woh apne kheti par dhyan de sakain</span>. Aap bataiye, aapke khet mein paani ke વ્યવસ્થા kaisi ba?
      </div>
      <div class="lx-controls">
        <div class="lx-button-row">
          <button class="lx-control-btn" onclick="playPause()">▶️ Play</button>
          <button class="lx-control-btn" onclick="prevExtraction()">⏮ Previous</button>
          <button class="lx-control-btn" onclick="nextExtraction()">⏭ Next</button>
        </div>
        <div class="lx-progress-container">
          <input type="range" id="progressSlider" class="lx-progress-slider"
                 min="0" max="8" value="0"
                 onchange="jumpToExtraction(this.value)">
        </div>
        <div class="lx-status-text">
          Entity <span id="entityInfo">1/9</span> |
          Pos <span id="posInfo">[960-995]</span>
        </div>
      </div>
    </div>

    <script>
      (function() {
        const extractions = [{"index": 0, "class": "concern", "text": "kisan ka karz maaf hi nahin ho pata", "color": "#C8E6C9", "startPos": 960, "endPos": 995, "beforeText": " bataiye, agar Verma ji phir se jeet jatein hain, toh aapke mann mein ka ummeed ba?\nUSER: Yahan par sabse badi samasya toh yeh hai ki kheti karte hue ", "extractionText": "kisan ka karz maaf hi nahin ho pata", "afterText": ". Byaj itna adhik hai ki hum chuka hi nahin pate. Boliye, kya bol rahe ho? Hamare khet mein hum bajra ugate hain.\nAI: Haan Bhaiya, aapka yeh baat bilk", "attributesHtml": "<div><strong>class:</strong> concern</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">loan forgiveness</span>, <span class=\"lx-attr-key\">domain</span>: <span class=\"lx-attr-value\">agriculture</span>}</div>"}, {"index": 1, "class": "concern", "text": "Byaj itna adhik hai ki hum chuka hi nahin pate", "color": "#C8E6C9", "startPos": 997, "endPos": 1043, "beforeText": "jatein hain, toh aapke mann mein ka ummeed ba?\nUSER: Yahan par sabse badi samasya toh yeh hai ki kheti karte hue kisan ka karz maaf hi nahin ho pata. ", "extractionText": "Byaj itna adhik hai ki hum chuka hi nahin pate", "afterText": ". Boliye, kya bol rahe ho? Hamare khet mein hum bajra ugate hain.\nAI: Haan Bhaiya, aapka yeh baat bilkul sahi ba. Hum samajh sakat hain. Verma ji kisa", "attributesHtml": "<div><strong>class:</strong> concern</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">high interest rate</span>, <span class=\"lx-attr-key\">domain</span>: <span class=\"lx-attr-value\">loan</span>, <span class=\"lx-attr-key\">effect</span>: <span class=\"lx-attr-value\">inability to repay</span>}</div>"}, {"index": 2, "class": "emotion", "text": "Boliye, kya bol rahe ho?", "color": "#FEF0C3", "startPos": 1045, "endPos": 1069, "beforeText": "SER: Yahan par sabse badi samasya toh yeh hai ki kheti karte hue kisan ka karz maaf hi nahin ho pata. Byaj itna adhik hai ki hum chuka hi nahin pate. ", "extractionText": "Boliye, kya bol rahe ho?", "afterText": " Hamare khet mein hum bajra ugate hain.\nAI: Haan Bhaiya, aapka yeh baat bilkul sahi ba. Hum samajh sakat hain. Verma ji kisanon ke liye interest rate ", "attributesHtml": "<div><strong>class:</strong> emotion</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">feeling</span>: <span class=\"lx-attr-value\">annoyance</span>, <span class=\"lx-attr-key\">intensity</span>: <span class=\"lx-attr-value\">medium</span>}</div>"}, {"index": 3, "class": "concern", "text": "Hamare khet mein hum bajra ugate hain", "color": "#C8E6C9", "startPos": 1070, "endPos": 1107, "beforeText": " samasya toh yeh hai ki kheti karte hue kisan ka karz maaf hi nahin ho pata. Byaj itna adhik hai ki hum chuka hi nahin pate. Boliye, kya bol rahe ho? ", "extractionText": "Hamare khet mein hum bajra ugate hain", "afterText": ".\nAI: Haan Bhaiya, aapka yeh baat bilkul sahi ba. Hum samajh sakat hain. Verma ji kisanon ke liye interest rate kam karwane par zaroor\nAI: Haan, Verma", "attributesHtml": "<div><strong>class:</strong> concern</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">crop information</span>, <span class=\"lx-attr-key\">crop</span>: <span class=\"lx-attr-value\">bajra</span>, <span class=\"lx-attr-key\">time</span>: <span class=\"lx-attr-value\">currently</span>}</div>"}, {"index": 4, "class": "emotion", "text": "Hum samajh sakat hain", "color": "#FEF0C3", "startPos": 1157, "endPos": 1178, "beforeText": "adhik hai ki hum chuka hi nahin pate. Boliye, kya bol rahe ho? Hamare khet mein hum bajra ugate hain.\nAI: Haan Bhaiya, aapka yeh baat bilkul sahi ba. ", "extractionText": "Hum samajh sakat hain", "afterText": ". Verma ji kisanon ke liye interest rate kam karwane par zaroor\nAI: Haan, Verma ji aapke loan par jo interest rate ba, usko kam karwane par bilkul dhy", "attributesHtml": "<div><strong>class:</strong> emotion</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">feeling</span>: <span class=\"lx-attr-value\">empathy</span>, <span class=\"lx-attr-key\">context</span>: <span class=\"lx-attr-value\">understanding farmer&#x27;s issues</span>}</div>"}, {"index": 5, "class": "action_item", "text": "kisanon ke liye interest rate kam karwane par zaroor", "color": "#D2E3FC", "startPos": 1189, "endPos": 1241, "beforeText": "pate. Boliye, kya bol rahe ho? Hamare khet mein hum bajra ugate hain.\nAI: Haan Bhaiya, aapka yeh baat bilkul sahi ba. Hum samajh sakat hain. Verma ji ", "extractionText": "kisanon ke liye interest rate kam karwane par zaroor", "afterText": "\nAI: Haan, Verma ji aapke loan par jo interest rate ba, usko kam karwane par bilkul dhyan de rahat hain. Unka poora koshish ba ki kisan log ke samasya", "attributesHtml": "<div><strong>class:</strong> action_item</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">interest rate reduction</span>, <span class=\"lx-attr-key\">beneficiary</span>: <span class=\"lx-attr-value\">farmers</span>}</div>"}, {"index": 6, "class": "action_item", "text": "aapke loan par jo interest rate ba, usko kam karwane par bilkul dhyan de rahat hain", "color": "#D2E3FC", "startPos": 1261, "endPos": 1344, "beforeText": ": Haan Bhaiya, aapka yeh baat bilkul sahi ba. Hum samajh sakat hain. Verma ji kisanon ke liye interest rate kam karwane par zaroor\nAI: Haan, Verma ji ", "extractionText": "aapke loan par jo interest rate ba, usko kam karwane par bilkul dhyan de rahat hain", "afterText": ". Unka poora koshish ba ki kisan log ke samasya kam ho sake aur woh apne kheti par dhyan de sakain. Aap bataiye, aapke khet mein paani ke \u0ab5\u0acd\u0aaf\u0ab5\u0ab8\u0acd\u0aa5\u0abe kai", "attributesHtml": "<div><strong>class:</strong> action_item</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">loan interest rate reduction</span>, <span class=\"lx-attr-key\">beneficiary</span>: <span class=\"lx-attr-value\">you (farmer)</span>}</div>"}, {"index": 7, "class": "action_item", "text": "kisan log ke samasya kam ho sake", "color": "#D2E3FC", "startPos": 1371, "endPos": 1403, "beforeText": "m karwane par zaroor\nAI: Haan, Verma ji aapke loan par jo interest rate ba, usko kam karwane par bilkul dhyan de rahat hain. Unka poora koshish ba ki ", "extractionText": "kisan log ke samasya kam ho sake", "afterText": " aur woh apne kheti par dhyan de sakain. Aap bataiye, aapke khet mein paani ke \u0ab5\u0acd\u0aaf\u0ab5\u0ab8\u0acd\u0aa5\u0abe kaisi ba?", "attributesHtml": "<div><strong>class:</strong> action_item</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">problem resolution</span>, <span class=\"lx-attr-key\">beneficiary</span>: <span class=\"lx-attr-value\">farmers</span>, <span class=\"lx-attr-key\">goal</span>: <span class=\"lx-attr-value\">reduce problems</span>}</div>"}, {"index": 8, "class": "action_item", "text": "woh apne kheti par dhyan de sakain", "color": "#D2E3FC", "startPos": 1408, "endPos": 1442, "beforeText": "ji aapke loan par jo interest rate ba, usko kam karwane par bilkul dhyan de rahat hain. Unka poora koshish ba ki kisan log ke samasya kam ho sake aur ", "extractionText": "woh apne kheti par dhyan de sakain", "afterText": ". Aap bataiye, aapke khet mein paani ke \u0ab5\u0acd\u0aaf\u0ab5\u0ab8\u0acd\u0aa5\u0abe kaisi ba?", "attributesHtml": "<div><strong>class:</strong> action_item</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">type</span>: <span class=\"lx-attr-value\">support</span>, <span class=\"lx-attr-key\">beneficiary</span>: <span class=\"lx-attr-value\">farmers</span>, <span class=\"lx-attr-key\">purpose</span>: <span class=\"lx-attr-value\">focus on farming</span>}</div>"}];
        let currentIndex = 0;
        let isPlaying = false;
        let animationInterval = null;
        let animationSpeed = 1.0;

        function updateDisplay() {
          const extraction = extractions[currentIndex];
          if (!extraction) return;

          document.getElementById('attributesContainer').innerHTML = extraction.attributesHtml;
          document.getElementById('entityInfo').textContent = (currentIndex + 1) + '/' + extractions.length;
          document.getElementById('posInfo').textContent = '[' + extraction.startPos + '-' + extraction.endPos + ']';
          document.getElementById('progressSlider').value = currentIndex;

          const playBtn = document.querySelector('.lx-control-btn');
          if (playBtn) playBtn.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';

          const prevHighlight = document.querySelector('.lx-text-window .lx-current-highlight');
          if (prevHighlight) prevHighlight.classList.remove('lx-current-highlight');
          const currentSpan = document.querySelector('.lx-text-window span[data-idx="' + currentIndex + '"]');
          if (currentSpan) {
            currentSpan.classList.add('lx-current-highlight');
            currentSpan.scrollIntoView({block: 'center', behavior: 'smooth'});
          }
        }

        function nextExtraction() {
          currentIndex = (currentIndex + 1) % extractions.length;
          updateDisplay();
        }

        function prevExtraction() {
          currentIndex = (currentIndex - 1 + extractions.length) % extractions.length;
          updateDisplay();
        }

        function jumpToExtraction(index) {
          currentIndex = parseInt(index);
          updateDisplay();
        }

        function playPause() {
          if (isPlaying) {
            clearInterval(animationInterval);
            isPlaying = false;
          } else {
            animationInterval = setInterval(nextExtraction, animationSpeed * 1000);
            isPlaying = true;
          }
          updateDisplay();
        }

        window.playPause = playPause;
        window.nextExtraction = nextExtraction;
        window.prevExtraction = prevExtraction;
        window.jumpToExtraction = jumpToExtraction;

        updateDisplay();
      })();
    </script>